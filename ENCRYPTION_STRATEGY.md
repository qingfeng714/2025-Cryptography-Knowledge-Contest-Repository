# ğŸ” åŠ å¯†ç­–ç•¥ä¸è·¨æ¨¡æ€å…³è”åˆ†æ

## ğŸ“‹ æ ¸å¿ƒé—®é¢˜

1. **è·¨æ¨¡æ€å¯¹é½åˆ°åŠ å¯†çš„æ€è·¯æ˜¯ä»€ä¹ˆï¼Ÿ**
2. **æ˜¯å­˜åœ¨æ˜ å°„å…³ç³»æ‰åŠ å¯†å—ï¼Ÿ**
3. **ä¸å­˜åœ¨æ˜ å°„å…³ç³»çš„æ•°æ®ä¿æŒæ˜æ–‡å—ï¼Ÿ**
4. **åŠ å¯†çš„ä¿¡æ¯èŒƒå›´æ˜¯ä»€ä¹ˆï¼Ÿ**

---

## ğŸ¯ å½“å‰å®ç°é€»è¾‘

### é˜¶æ®µ1: è·¨æ¨¡æ€æ£€æµ‹ï¼ˆæ„ŸçŸ¥å±‚ï¼‰

```python
# services/crossmodal_service.py

def process_csv_detection(csv_path, dicom_path):
    """
    æ­¥éª¤1: æ£€æµ‹CSVä¸­çš„æ•æ„Ÿå®ä½“
    """
    entities = []
    for col in ['Path', 'Name', 'Sex', 'Age', 'Phone', 'ID_Number', 'Address']:
        # æå–æ‰€æœ‰æ•æ„Ÿå­—æ®µ
        entities.append({
            'type': col_type,
            'text': value,
            'row_index': row_num,
            'column': col_name
        })
    
    """
    æ­¥éª¤2: æ£€æµ‹DICOMå…ƒæ•°æ®
    """
    dicom_metadata = {
        'patient_id': ...,
        'patient_name': ...,
        'patient_sex': ...,
        'patient_age': ...
    }
    
    """
    æ­¥éª¤3: è·¨æ¨¡æ€åŒ¹é…
    """
    mappings = []
    for entity in entities:
        if entity['column'] == 'Path':
            # æå–patient_idè¿›è¡ŒåŒ¹é…
            if csv_patient_id == dicom_patient_id:
                mappings.append({
                    'match_type': 'patient_id_exact_match',
                    'confidence': 1.0,
                    'risk_level': 'critical'  # âš ï¸ é«˜é£é™©
                })
```

**è¾“å‡º**:
```json
{
    "text_entities": [æ‰€æœ‰æ£€æµ‹åˆ°çš„æ•æ„Ÿå®ä½“],
    "mappings": [å­˜åœ¨è·¨æ¨¡æ€å…³è”çš„å®ä½“],
    "metrics": {é£é™©è¯„ä¼°æŒ‡æ ‡}
}
```

---

### é˜¶æ®µ2: æ•°æ®ä¿æŠ¤ï¼ˆä¿æŠ¤å±‚ï¼‰

#### å½“å‰å®ç°ï¼š**å…¨é‡åŠ å¯†ç­–ç•¥**

```python
# services/protection_service.py

def protect_batch(detection_result, output_dir, batch_id):
    """
    å½“å‰ç­–ç•¥ï¼šå¯¹æ‰€æœ‰æ£€æµ‹åˆ°çš„æ•æ„Ÿä¿¡æ¯è¿›è¡ŒåŠ å¯†
    ä¸åŒºåˆ†æ˜¯å¦å­˜åœ¨è·¨æ¨¡æ€å…³è”
    """
    
    results = detection_result.get('results', [])
    
    for item in results:
        # âœ… åŠ å¯†DICOMï¼ˆä¸ç®¡æ˜¯å¦åŒ¹é…ï¼‰
        if dicom_file.exists():
            protect_dicom(dicom_path, ...)
        
        # âœ… åŠ å¯†CSVæ•°æ®ï¼ˆä¸ç®¡æ˜¯å¦åŒ¹é…ï¼‰
        csv_data = item.get('csv_data', {})
        phi_cols = ['patient_id', 'patient_sex', 'patient_age']
        protect_text_data(csv_data, phi_cols, ...)
```

#### å®é™…åŠ å¯†å†…å®¹

**DICOMåŠ å¯†**:
```python
# åŠ å¯†çš„å­—æ®µï¼ˆä¸ç®¡æ˜¯å¦æœ‰è·¨æ¨¡æ€åŒ¹é…ï¼‰
SENSITIVE_TAGS = [
    ("PatientID",        (0x0010,0x0020), "alnum"),   # âœ… åŠ å¯†
    ("AccessionNumber",  (0x0008,0x0050), "alnum"),   # âœ… åŠ å¯†
    ("StudyDate",        (0x0008,0x0020), "digits"),  # âœ… åŠ å¯†
    ("InstitutionName",  (0x0008,0x0080), "alnum"),   # âœ… åŠ å¯†
]

# åŠ å¯†åæ›¿æ¢ä¸ºtoken
ds.PatientID = "TOKEN_ABC123"  # FPEåŠ å¯†åçš„token
```

**CSVæ–‡æœ¬åŠ å¯†**:
```python
# åŠ å¯†çš„åˆ—ï¼ˆä¸ç®¡æ˜¯å¦æœ‰è·¨æ¨¡æ€åŒ¹é…ï¼‰
phi_cols = ['patient_id', 'patient_sex', 'patient_age']

# æ¯ä¸ªå­—æ®µéƒ½ç”Ÿæˆ
{
    "token": "TOKEN_...",        # FPE tokenï¼ˆä¿ç•™æ ¼å¼ï¼‰
    "cipher_b64": "...",         # Ascon AEADå¯†æ–‡
    "hash": "sha256...",         # åŸæ–‡å“ˆå¸Œ
    "ad": "{...}",               # å…³è”æ•°æ®
    "nonce": "..."               # éšæœºæ•°
}
```

---

## ğŸ¤” é—®é¢˜åˆ†æ

### é—®é¢˜1: æ˜¯å­˜åœ¨æ˜ å°„å…³ç³»æ‰åŠ å¯†å—ï¼Ÿ

**å½“å‰ç­”æ¡ˆ**: âŒ **å¦**

**å½“å‰å®ç°**:
- æ‰€æœ‰æ£€æµ‹åˆ°çš„æ•æ„Ÿä¿¡æ¯**éƒ½ä¼šè¢«åŠ å¯†**
- ä¸ç®¡æ˜¯å¦å­˜åœ¨è·¨æ¨¡æ€æ˜ å°„å…³ç³»

**åŸå› **:
1. **å®‰å…¨ä¼˜å…ˆ**: å³ä½¿æ²¡æœ‰è·¨æ¨¡æ€å…³è”ï¼ŒCSVå’ŒDICOMä¸­çš„PHIæœ¬èº«å°±æ˜¯æ•æ„Ÿä¿¡æ¯
2. **ç®€åŒ–å®ç°**: ç»Ÿä¸€çš„åŠ å¯†ç­–ç•¥ï¼Œé¿å…å¤æ‚çš„æ¡ä»¶åˆ¤æ–­
3. **åˆè§„è¦æ±‚**: HIPAAç­‰æ³•è§„è¦æ±‚åŠ å¯†æ‰€æœ‰PHIï¼Œä¸åŒºåˆ†å…³è”æ€§

**ç¤ºä¾‹**:
```
CSV Row 1: patient00001 (æœ‰å¯¹åº”çš„DICOM) â†’ âœ… åŠ å¯†
CSV Row 2: patient00999 (æ— å¯¹åº”çš„DICOM) â†’ âœ… ä¹ŸåŠ å¯†
```

---

### é—®é¢˜2: ä¸å­˜åœ¨æ˜ å°„å…³ç³»çš„å°±ä¿æŒæ˜æ–‡å—ï¼Ÿ

**å½“å‰ç­”æ¡ˆ**: âŒ **å¦ï¼Œä¹Ÿä¼šåŠ å¯†**

**å½“å‰å®ç°**:
```python
for item in detection_result['results']:
    if item.get('matched'):
        # æœ‰è·¨æ¨¡æ€åŒ¹é… â†’ åŠ å¯†
        protect_data(...)
    else:
        # æ— è·¨æ¨¡æ€åŒ¹é… â†’ ä»ç„¶åŠ å¯†ï¼ˆå½“å‰å®ç°ï¼‰
        # ç†è®ºä¸Šå¯ä»¥é€‰æ‹©ä¸åŠ å¯†æˆ–è½»åº¦ä¿æŠ¤
```

**æ”¹è¿›å»ºè®®**ï¼ˆè§åæ–‡ï¼‰:
- å­˜åœ¨æ˜ å°„å…³ç³» â†’ **å¼ºåŠ å¯†**ï¼ˆAscon AEAD + SPHINCS+ç­¾åï¼‰
- ä¸å­˜åœ¨æ˜ å°„å…³ç³» â†’ **å¯é€‰ç­–ç•¥**:
  - é€‰é¡¹A: è½»åº¦åŠ å¯†ï¼ˆä»…FPE tokenï¼‰
  - é€‰é¡¹B: è„±æ•ï¼ˆMaskingï¼Œå¦‚`å¼ **`ï¼‰
  - é€‰é¡¹C: ä¿ç•™æ˜æ–‡ä½†æ ‡è®°ï¼ˆå®¡è®¡ï¼‰

---

### é—®é¢˜3: åŠ å¯†çš„ä¿¡æ¯èŒƒå›´

**å½“å‰ç­”æ¡ˆ**: **æ‰€æœ‰æ•æ„Ÿä¿¡æ¯ï¼Œä¸ä»…ä»…æ˜¯å…³è”é”®**

#### åŠ å¯†èŒƒå›´å¯¹æ¯”

| æ•°æ®ç±»å‹ | å…³è”é”® | å…¶ä»–æ•æ„Ÿä¿¡æ¯ | å½“å‰æ˜¯å¦åŠ å¯† |
|---------|--------|------------|------------|
| **DICOM** | PatientID | AccessionNumber, StudyDate, InstitutionName | âœ… å…¨éƒ¨åŠ å¯† |
| **CSV** | patient_id (Pathåˆ—) | Name, Sex, Age, Phone, ID_Number, Address | âœ… å…¨éƒ¨åŠ å¯† |

#### å…·ä½“ç¤ºä¾‹

**CSVåŸå§‹æ•°æ®**:
```csv
Path,Name,Sex,Age,Phone,ID_Number,Address
.../patient00001/...,å¼ ä¸‰,Male,35,13812345678,110101198901011234,åŒ—äº¬å¸‚æœé˜³åŒºå»ºå›½è·¯1å·
```

**åŠ å¯†å**:
```json
{
  "columns": {
    "patient_id": "PATIENT00001",        // â† å…³è”é”®ï¼ˆFPEï¼‰
    "Name": "ZHANGSAN",                  // â† å…¶ä»–æ•æ„Ÿä¿¡æ¯ï¼ˆFPEï¼‰
    "Sex": "M",                          // â† å…¶ä»–æ•æ„Ÿä¿¡æ¯ï¼ˆFPEï¼‰
    "Age": "35",                         // â† å…¶ä»–æ•æ„Ÿä¿¡æ¯ï¼ˆFPEï¼‰
    "Phone": "1381234567X",              // â† å…¶ä»–æ•æ„Ÿä¿¡æ¯ï¼ˆFPEï¼‰
    "ID_Number": "11010119890101XXXX"   // â† å…¶ä»–æ•æ„Ÿä¿¡æ¯ï¼ˆFPEï¼‰
  },
  "columns_cipher": {
    "patient_id": {
      "cipher_b64": "base64_encrypted",  // â† å®Œæ•´å¯†æ–‡
      "hash": "sha256...",
      ...
    },
    // æ¯ä¸ªå­—æ®µéƒ½æœ‰å®Œæ•´çš„å¯†æ–‡
  }
}
```

**âœ… æ‰€æœ‰æ•æ„Ÿå­—æ®µéƒ½åŠ å¯†ï¼ŒåŒ…æ‹¬**:
1. å…³è”é”®ï¼ˆpatient_idï¼‰
2. ç›´æ¥æ ‡è¯†ç¬¦ï¼ˆName, ID_Number, Phoneï¼‰
3. å‡†æ ‡è¯†ç¬¦ï¼ˆSex, Age, Addressï¼‰

---

## ğŸ¨ è®¾è®¡æ€è·¯è¯¦è§£

### ä¸ºä»€ä¹ˆé‡‡ç”¨å…¨é‡åŠ å¯†ï¼Ÿ

#### 1. **éšç§ä¿æŠ¤çš„å±‚æ¬¡**

```
Layer 1: å•æ•°æ®æºPHIä¿æŠ¤
â”œâ”€â”€ CSVä¸­çš„å§“åã€ç”µè¯ã€èº«ä»½è¯
â””â”€â”€ DICOMä¸­çš„PatientIDã€StudyDate
     â†“ å³ä½¿å•ç‹¬æ³„éœ²ä¹Ÿæ˜¯éšç§é£é™©
     â†“ å¿…é¡»ä¿æŠ¤

Layer 2: è·¨æ¨¡æ€å…³è”é£é™©ï¼ˆæ›´é«˜é£é™©ï¼‰
â”œâ”€â”€ CSVçš„patient00001 â†” DICOMçš„patient00001
â””â”€â”€ å¯ä»¥å…³è”åŒä¸€ä¸ªäººçš„å¤šç§æ•°æ®
     â†“ é‡è¯†åˆ«é£é™©æ›´é«˜
     â†“ éœ€è¦é¢å¤–æ ‡è®°å’Œå®¡è®¡
```

#### 2. **åˆè§„è¦æ±‚ï¼ˆHIPAAï¼‰**

HIPAAè¦æ±‚ä¿æŠ¤18ç±»PHIï¼ŒåŒ…æ‹¬ï¼š
- âœ… å§“åã€åœ°å€ã€ç”µè¯
- âœ… èº«ä»½è¯å·
- âœ… ç—…å†å·ï¼ˆPatientIDï¼‰
- âœ… æ—¥æœŸï¼ˆStudyDateï¼‰

**æ— è®ºæ˜¯å¦æœ‰è·¨æ¨¡æ€å…³è”ï¼Œè¿™äº›éƒ½å¿…é¡»ä¿æŠ¤**

#### 3. **æœ€å°æƒé™åŸåˆ™**

```
å­˜å‚¨æ—¶ â†’ å…¨éƒ¨åŠ å¯†
ä½¿ç”¨æ—¶ â†’ æŒ‰éœ€è§£å¯†ï¼ˆéœ€è¦æˆæƒï¼‰
å®¡è®¡æ—¶ â†’ è®°å½•è®¿é—®æ—¥å¿—
```

---

## ğŸ”„ è·¨æ¨¡æ€æ˜ å°„çš„ä½œç”¨

è™½ç„¶ä¸å½±å“"æ˜¯å¦åŠ å¯†"ï¼Œä½†è·¨æ¨¡æ€æ˜ å°„åœ¨ä»¥ä¸‹æ–¹é¢èµ·ä½œç”¨ï¼š

### 1. **é£é™©åˆ†çº§**

```python
# crossmodal_service.py
if csv_patient_id == dicom_patient_id:
    mapping = {
        'risk_level': 'critical',  # âš ï¸ æœ€é«˜é£é™©
        'confidence': 1.0
    }
```

**ç”¨é€”**:
- å®¡è®¡é‡ç‚¹å…³æ³¨
- è®¿é—®æ§åˆ¶æ›´ä¸¥æ ¼
- è§£å¯†éœ€è¦æ›´é«˜æƒé™

### 2. **å®¡è®¡è¿½è¸ª**

```json
// audit_manifest.json
{
  "items": [
    {
      "patient_id": "patient00001",
      "cross_modal_match": true,      // âœ… æ ‡è®°æœ‰å…³è”
      "risk_level": "critical",        // âš ï¸ é«˜é£é™©
      "match_type": "patient_id_exact_match"
    }
  ]
}
```

### 3. **æœªæ¥çš„å·®å¼‚åŒ–ä¿æŠ¤**

è™½ç„¶å½“å‰å…¨é‡åŠ å¯†ï¼Œä½†è·¨æ¨¡æ€æ˜ å°„ä¸ºå·®å¼‚åŒ–ç­–ç•¥é¢„ç•™äº†æ¥å£ï¼š

```python
# æœªæ¥å¯èƒ½çš„å®ç°
if mapping_exists and risk_level == 'critical':
    # å¼ºåŠ å¯† + å¤šé‡ç­¾å + è®¿é—®æ§åˆ¶
    encrypt_with_strong_policy(data)
else:
    # æ ‡å‡†åŠ å¯†
    encrypt_with_standard_policy(data)
```

---

## ğŸ’¡ æ”¹è¿›å»ºè®®ï¼šå·®å¼‚åŒ–ä¿æŠ¤ç­–ç•¥

### ç­–ç•¥1: åŸºäºé£é™©åˆ†çº§çš„ä¿æŠ¤

```python
class DifferentialProtectionService:
    """å·®å¼‚åŒ–ä¿æŠ¤æœåŠ¡"""
    
    def protect_batch(self, detection_result):
        for item in detection_result['results']:
            risk_level = self._assess_risk(item)
            
            if risk_level == 'critical':
                # å­˜åœ¨è·¨æ¨¡æ€å…³è” â†’ å¼ºä¿æŠ¤
                self._protect_critical(item)
            elif risk_level == 'high':
                # å•æºé«˜æ•æ„Ÿ â†’ æ ‡å‡†ä¿æŠ¤
                self._protect_high(item)
            elif risk_level == 'medium':
                # å‡†æ ‡è¯†ç¬¦ â†’ è½»åº¦ä¿æŠ¤
                self._protect_medium(item)
            else:
                # ä½é£é™© â†’ é€‰æ‹©æ€§ä¿æŠ¤
                self._protect_low(item)
    
    def _protect_critical(self, item):
        """å¼ºä¿æŠ¤ï¼šAscon AEAD + SPHINCS+ + åŒé‡å®¡è®¡"""
        # åŠ å¯†æ‰€æœ‰å­—æ®µ
        # ç”Ÿæˆç­¾å
        # è®°å½•è¯¦ç»†å®¡è®¡æ—¥å¿—
        # è®¾ç½®ä¸¥æ ¼è®¿é—®æ§åˆ¶
        pass
    
    def _protect_high(self, item):
        """æ ‡å‡†ä¿æŠ¤ï¼šAscon AEAD + å®¡è®¡"""
        # åŠ å¯†æ•æ„Ÿå­—æ®µ
        # è®°å½•å®¡è®¡æ—¥å¿—
        pass
    
    def _protect_medium(self, item):
        """è½»åº¦ä¿æŠ¤ï¼šFPEæˆ–è„±æ•"""
        # ä»…FPE token
        # æˆ–k-åŒ¿ååŒ–
        pass
    
    def _protect_low(self, item):
        """é€‰æ‹©æ€§ä¿æŠ¤ï¼šæ ‡è®°æˆ–ä¿ç•™"""
        # ä»…æ ‡è®°ï¼Œä¸åŠ å¯†
        # æˆ–å®Œå…¨ä¿ç•™æ˜æ–‡
        pass
```

### ç­–ç•¥2: åŸºäºæ•°æ®ç”¨é€”çš„ä¿æŠ¤

```python
class PurposeBasedProtection:
    """åŸºäºç”¨é€”çš„ä¿æŠ¤"""
    
    def protect_for_research(self, data):
        """ç§‘ç ”ç”¨é€”ï¼šå…è®¸ç»Ÿè®¡åˆ†æï¼Œä½†å»æ ‡è¯†åŒ–"""
        # åˆ é™¤ç›´æ¥æ ‡è¯†ç¬¦
        # ä¿ç•™å‡†æ ‡è¯†ç¬¦ï¼ˆå¹´é¾„ã€æ€§åˆ«ï¼‰
        # k-åŒ¿ååŒ–å¤„ç†
        pass
    
    def protect_for_storage(self, data):
        """å­˜å‚¨ç”¨é€”ï¼šå®Œå…¨åŠ å¯†"""
        # æ‰€æœ‰PHIåŠ å¯†
        # é•¿æœŸå­˜å‚¨
        pass
    
    def protect_for_sharing(self, data):
        """å…±äº«ç”¨é€”ï¼šå·®å¼‚åŒ–éšç§"""
        # åŸºäºÎµ-å·®åˆ†éšç§
        # æ·»åŠ å™ªå£°
        pass
```

---

## ğŸ“Š å½“å‰vså»ºè®®å®ç°å¯¹æ¯”

| ç»´åº¦ | å½“å‰å®ç° | å»ºè®®æ”¹è¿› |
|------|---------|---------|
| **åŠ å¯†å†³ç­–** | å…¨é‡åŠ å¯† | åŸºäºé£é™©åˆ†çº§ |
| **å…³è”æ•°æ®** | åŒç­‰å¤„ç† | å¼ºåŒ–ä¿æŠ¤ |
| **éå…³è”æ•°æ®** | åŒç­‰å¤„ç† | å¯é€‰è½»åº¦ä¿æŠ¤ |
| **å‡†æ ‡è¯†ç¬¦** | å…¨éƒ¨åŠ å¯† | å¯é€‰k-åŒ¿ååŒ– |
| **è®¿é—®æ§åˆ¶** | æœªå®ç° | åŸºäºé£é™©çš„ACL |
| **è§£å¯†ç­–ç•¥** | æœªå®ç° | åˆ†çº§æˆæƒè§£å¯† |

---

## ğŸ”‘ å…³é”®è®¾è®¡å†³ç­–

### å½“å‰è®¾è®¡çš„ä¼˜ç‚¹

âœ… **ç®€å•ç›´æ¥**: ç»Ÿä¸€åŠ å¯†ï¼Œé€»è¾‘æ¸…æ™°  
âœ… **å®‰å…¨ä¼˜å…ˆ**: è¿‡åº¦ä¿æŠ¤å¥½äºä¿æŠ¤ä¸è¶³  
âœ… **åˆè§„å‹å¥½**: æ»¡è¶³HIPAAç­‰æ³•è§„è¦æ±‚  
âœ… **æ˜“äºå®ç°**: æ— éœ€å¤æ‚çš„ç­–ç•¥å¼•æ“  

### å½“å‰è®¾è®¡çš„å±€é™

âš ï¸ **çµæ´»æ€§ä¸è¶³**: æ— æ³•é’ˆå¯¹ä¸åŒåœºæ™¯è°ƒæ•´  
âš ï¸ **æ€§èƒ½å¼€é”€**: å…¨é‡åŠ å¯†å¯èƒ½å½±å“æ€§èƒ½  
âš ï¸ **å¯ç”¨æ€§**: å®Œå…¨åŠ å¯†åéš¾ä»¥è¿›è¡Œç»Ÿè®¡åˆ†æ  
âš ï¸ **æˆæœ¬**: å­˜å‚¨å’Œè®¡ç®—æˆæœ¬è¾ƒé«˜  

---

## ğŸ¯ æ€»ç»“å›ç­”

### Q1: æ˜¯å­˜åœ¨æ˜ å°„å…³ç³»æ‰åŠ å¯†å—ï¼Ÿ

**A**: âŒ å¦ã€‚**æ‰€æœ‰æ£€æµ‹åˆ°çš„æ•æ„Ÿä¿¡æ¯éƒ½ä¼šåŠ å¯†**ï¼Œä¸ç®¡æ˜¯å¦å­˜åœ¨è·¨æ¨¡æ€æ˜ å°„ã€‚

### Q2: ä¸å­˜åœ¨æ˜ å°„å…³ç³»çš„å°±ä¿æŒæ˜æ–‡å—ï¼Ÿ

**A**: âŒ å¦ã€‚**ä¹Ÿä¼šåŠ å¯†**ã€‚ä½†åœ¨æ”¹è¿›æ–¹æ¡ˆä¸­ï¼Œå¯ä»¥è€ƒè™‘å·®å¼‚åŒ–ä¿æŠ¤ã€‚

### Q3: åŠ å¯†çš„ä¿¡æ¯èŒƒå›´ï¼Ÿ

**A**: âœ… **æ‰€æœ‰æ•æ„Ÿä¿¡æ¯**ï¼ŒåŒ…æ‹¬ï¼š
- å…³è”é”®ï¼ˆpatient_idï¼‰
- ç›´æ¥æ ‡è¯†ç¬¦ï¼ˆName, Phone, ID_Numberï¼‰
- å‡†æ ‡è¯†ç¬¦ï¼ˆSex, Age, Addressï¼‰
- DICOMå…ƒæ•°æ®ï¼ˆPatientID, StudyDateç­‰ï¼‰

### Q4: è·¨æ¨¡æ€æ˜ å°„çš„ä½œç”¨ï¼Ÿ

**A**: ä¸»è¦ç”¨äºï¼š
- âœ… é£é™©è¯„ä¼°å’Œåˆ†çº§
- âœ… å®¡è®¡è¿½è¸ª
- âœ… æœªæ¥å·®å¼‚åŒ–ä¿æŠ¤çš„ä¾æ®
- âš ï¸ **ä¸å†³å®šæ˜¯å¦åŠ å¯†**

---

## ğŸ’¡ å®ç°å»ºè®®

å¦‚æœéœ€è¦å·®å¼‚åŒ–ä¿æŠ¤ç­–ç•¥ï¼Œå¯ä»¥ä¿®æ”¹ `protection_service.py`:

```python
def protect_batch(self, detection_result, output_dir, batch_id, strategy='full'):
    """
    strategyå‚æ•°ï¼š
    - 'full': å…¨é‡åŠ å¯†ï¼ˆå½“å‰é»˜è®¤ï¼‰
    - 'differential': å·®å¼‚åŒ–ä¿æŠ¤ï¼ˆåŸºäºé£é™©ï¼‰
    - 'minimal': æœ€å°åŒ–ä¿æŠ¤ï¼ˆä»…å…³è”æ•°æ®ï¼‰
    """
    if strategy == 'differential':
        return self._protect_differential(detection_result, ...)
    elif strategy == 'minimal':
        return self._protect_minimal(detection_result, ...)
    else:
        return self._protect_full(detection_result, ...)
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0.0  
**æœ€åæ›´æ–°**: 2025-10-21  
**ä½œè€…**: ç³»ç»Ÿæ¶æ„å›¢é˜Ÿ
